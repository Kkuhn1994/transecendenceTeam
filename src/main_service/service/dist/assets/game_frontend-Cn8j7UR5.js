function P(){const e=document.getElementById("pongCanvas");if(!e)return;const t=e.getContext("2d");if(!t)return;window.pongInterval&&clearInterval(window.pongInterval);let a=e.height/2,r=e.height/2,d=e.width/2,o=e.height/2,w=0,g=0,f=!1,c=!1,h=!1,s=!1;const u=i=>{i.key==="ArrowUp"&&(f=!0),i.key==="ArrowDown"&&(c=!0),i.key==="w"&&(h=!0),i.key==="s"&&(s=!0)},y=i=>{i.key==="ArrowUp"&&(f=!1),i.key==="ArrowDown"&&(c=!1),i.key==="w"&&(h=!1),i.key==="s"&&(s=!1)};document.addEventListener("keydown",u),document.addEventListener("keyup",y);function m(){if(!e||!document.body.contains(e)){document.removeEventListener("keydown",u),document.removeEventListener("keyup",y);return}const i=10,n=100,v=10;t.fillStyle="#f4f4f9",t.fillRect(0,0,e.width,e.height),t.fillStyle="#000",t.fillRect(0,a,i,n),t.fillRect(e.width-i,r,i,n),t.beginPath(),t.arc(d,o,v,0,Math.PI*2),t.fillStyle="#000",t.fill(),t.closePath(),t.font="30px Arial",t.fillStyle="#000",t.fillText(w.toString(),e.width/4,50),t.fillText(g.toString(),3*e.width/4,50),requestAnimationFrame(m)}function k(){if(!e||!document.body.contains(e))return;let i=e.height,n=e.width;fetch("/game_service/game",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({upPressed:f,downPressed:c,wPressed:h,sPressed:s,canvasheight:i,canvaswidth:n,leftPaddleY:a,rightPaddleY:r,ballX:d,ballY:o})}).then(l=>l.json()).then(l=>{a=l.leftPaddleY,r=l.rightPaddleY,d=l.ballX,o=l.ballY,l.scoreLeft!==void 0&&(w=l.scoreLeft),l.scoreRight!==void 0&&(g=l.scoreRight),l.winner&&alert(`Game Over! ${l.winner} wins!`)}).catch(l=>{console.error("Fehler bei der Anfrage:",l)})}requestAnimationFrame(m),window.pongInterval=setInterval(k,10)}export{P as startGame};
